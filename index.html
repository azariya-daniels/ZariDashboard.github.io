<!DOCTYPE html>
<html lang="en">
<!-- Previous head content remains the same -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Tracker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <!-- Add this new style for the dropdown -->
    <style>
        /* Previous styles remain the same */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: white;
            min-width: 160px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border-radius: 8px;
            z-index: 1;
        }
        
        .dropdown-content button {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            width: 100%;
            text-align: left;
            border: none;
            background: none;
        }
        
        .dropdown-content button:hover {
            background-color: #f1f1f1;
        }
        
        .show {
            display: block;
        }

        /* Previous styles remain here */
    </style>
</head>
<body>
    <!-- Previous body content remains the same until the table -->

    <!-- Modify the table header to include the new column -->
    <thead>
        <tr class="text-left border-b">
            <th class="pb-3">Company</th>
            <th class="pb-3">Position</th>
            <th class="pb-3">Status</th>
            <th class="pb-3">Actions</th>
            <th class="pb-3"></th>
        </tr>
    </thead>

    <!-- Update the updateTable function in your script -->
    <script>
        // Previous JavaScript remains the same

        function updateTable() {
            const tbody = document.getElementById('applicationsTable');
            tbody.innerHTML = '';
            applications.sort((a, b) => new Date(b.dateApplied) - new Date(a.dateApplied))
                        .forEach((app, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="py-2">${app.company}</td>
                    <td class="py-2">${app.position}</td>
                    <td class="py-2">
                        <span class="px-2 py-1 rounded-full text-sm ${getStatusColor(app.status)}">
                            ${app.status}
                        </span>
                    </td>
                    <td class="py-2">
                        <button onclick="deleteApplication(${index})" class="text-red-500 hover:text-red-700">Delete</button>
                    </td>
                    <td class="py-2 relative">
                        <div class="dropdown">
                            <button onclick="toggleDropdown(${index})" class="px-2 py-1 hover:bg-gray-100 rounded-full">
                                â‹®
                            </button>
                            <div id="dropdown${index}" class="dropdown-content">
                                <button onclick="updateStatus(${index}, 'Active')">Set to Active</button>
                                <button onclick="updateStatus(${index}, 'Interview')">Set to Interview</button>
                                <button onclick="updateStatus(${index}, 'Offer')">Set to Offer</button>
                                <button onclick="updateStatus(${index}, 'Rejected')">Set to Rejected</button>
                            </div>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Add these new functions for the dropdown functionality
        function toggleDropdown(index) {
            // Close all other dropdowns first
            const dropdowns = document.getElementsByClassName("dropdown-content");
            for(let i = 0; i < dropdowns.length; i++) {
                if(dropdowns[i].id !== `dropdown${index}`) {
                    dropdowns[i].classList.remove('show');
                }
            }
            
            document.getElementById(`dropdown${index}`).classList.toggle("show");
        }

        // Close dropdowns when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.dropdown button')) {
                const dropdowns = document.getElementsByClassName("dropdown-content");
                for(let i = 0; i < dropdowns.length; i++) {
                    let openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

        function updateStatus(index, newStatus) {
            applications[index].status = newStatus;
            localStorage.setItem('applications', JSON.stringify(applications));
            updateStats();
            updateChart();
            updateTable();
        }

        // Previous JavaScript remains the same
    </script>
</body>
</html>